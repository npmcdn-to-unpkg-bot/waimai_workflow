define("ops:widget/batchmanage/BatchManage.jsx",function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=e("react"),s=i(n),l=e("react-dom"),d=(i(l),e("react-router"),e("antd")),o=e("ops:static/js/utils/ajax.js"),r=i(o),c={submit:{marginTop:"70px",marginLeft:"60px"},input:{width:"500px",height:"200px",outline:"none",borderRadius:"5px"},submitBtn:{marginTop:"10px",marginLeft:"60px"},message:{width:"500px"},table:{marginLeft:"55px",marginTop:"50px"}},u=s["default"].createClass({displayName:"BatchManage",contextTypes:{router:s["default"].PropTypes.object},getInitialState:function(){return{message:"当前无操作",visible:!1,dataInput:[],listShow:!1,tableData:[]}},submit:function(){var e=this.refs.test.value,t=e.split("\n"),a="1"===this.props.location.query.oprate?"/cmdb/batch/nodename/":"/cmdb/batch/nodes/",i=this;r["default"]({headers:{"content-type":"application/json"}}).get(a+encodeURIComponent(t)).then(function(e){i.setState({dataInput:e.items,visible:!0,listShow:!0})})},deleteTableData:function(e){var t=this.state.tableData;t.splice(e,1),this.setState({tableData:t})},handleOk:function(){this.setState({visible:!1,hide:"hide",table:""});var e=this,t="1"===this.props.location.query.oprate?"/cmdb/batch/nodename/":"/cmdb/batch/nodes/",a={kind:"Batch",items:this.state.dataInput};a={kind:"Batch",items:["1.1.1.1:virtual","1.1.1.2:physical"]},r["default"]({headers:{"content-type":"application/json"}}).post(t,JSON.stringify(a)).then(function(t){e.setState({tableData:t.items.map(function(t,a){return"1"===e.props.location.query.oprate?{oldName:t.oldName,newName:t.newName,key:a,msg:t.msg}:{ip:t.ip,id:t.id,key:a,check:s["default"].createElement(d.Icon,{type:"cross-circle-o",onClick:e.deleteTableData.bind(this,a)})}})})})},handleCancel:function(){this.setState({visible:!1})},"delete":function(e){var t=this.state.dataInput;t.splice(e,1),this.setState({dataInput:t})},render:function(){{var e=this,t=[{title:"名称",dataIndex:"ip"},{title:"类型",dataIndex:"type"},{title:"操作",dataIndex:"check"}],a=[{title:"修改前名称",dataIndex:"oldName"},{title:"修改后名称",dataIndex:"newName"},{title:"状态",dataIndex:"msg"}],i="1"===this.props.location.query.oprate?a:t,n=this.state.dataInput.map(function(t,a){return s["default"].createElement("p",{key:a},t.msg," ",s["default"].createElement(d.Icon,{type:"cross-circle-o",onClick:e["delete"].bind(e,a)}))});this.state.listShow}return s["default"].createElement("div",null,s["default"].createElement("div",{style:c.submit},s["default"].createElement("div",{className:"message",style:c.message},s["default"].createElement(d.Alert,{message:this.props.location.query.the,type:"info"})),s["default"].createElement("textarea",{type:"text",style:c.input,ref:"test"})),s["default"].createElement("div",{className:"submitBtn",style:c.submitBtn},s["default"].createElement(d.Button,{type:"primary",onClick:this.submit},"提交数据"),s["default"].createElement("div",{id:"popwin"},s["default"].createElement(d.Modal,{title:"第一个 Modal",visible:this.state.visible,footer:[s["default"].createElement(d.Button,{key:"back",type:"ghost",size:"large",onClick:this.handleCancel},"返 回"),s["default"].createElement(d.Button,{key:"submit",type:"primary",size:"large",onClick:this.handleOk},"提交")]},n))),s["default"].createElement("div",{style:c.table},i.length?s["default"].createElement(d.Table,{columns:i,dataSource:this.state.tableData}):null))}});t["default"]=u,a.exports=t["default"]});