define("ops:widget/sidebar/Sidebar.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){var r=t.shift();if(0===t.length){e[r].children=n;for(var i=0;i<e[r].children.length;i++)"serviceUnit"==e[r].children[i].type&&(e[r].children[i].isLeaf=!0);console.log("1",e[r].children)}else{e[r].children=a(e[r].children,t,n);for(var i=0;i<e[r].children.length;i++)"serviceUnit"==e[r].children[i].type&&(e[r].children[i].isLeaf=!0);console.log("2",e[r].children)}return e}Object.defineProperty(t,"__esModule",{value:!0});var o=e("ops:components/react/react.js"),s=r(o),c=e("ops:components/antd/lib/index.js"),l=e("ops:static/js/utils/jsonp.js"),d=r(l),u=c.Tree.TreeNode,f=s["default"].createClass({displayName:"Sidebar",getInitialState:function(){return{treeData:[]}},componentDidMount:function(){var e=this,t=this;setTimeout(function(){d["default"](e.props.url,function(e,n){t.setState({treeData:Object.keys(n).map(function(e){return n[e]})})})},100)},onLoadData:function(e){var t=this,n=e.props.eventKey.split("-").slice(1),r=this;return new Promise(function(o){var s=[].concat(i(t.state.treeData));d["default"]("http://noah.baidu.com/service-tree/v1/node/"+e.props.id+"/children",function(e,t){r.setState({treeData:a(s,n,Object.keys(t).map(function(e){return t[e]}))}),o()})})},render:function(){var e=function n(e,t){return e.map(function(e,r){var i=t+"-"+r;return e.children?s["default"].createElement(u,{title:e.name,key:i,id:e.id},n(e.children,i)):s["default"].createElement(u,{title:e.name,key:i,id:e.id,isLeaf:e.isLeaf,disabled:"0-0-0"===e.key})})},t=e(this.state.treeData,"0");return s["default"].createElement(c.Tree,{loadData:this.onLoadData},t)}});t["default"]=f,n.exports=t["default"]});