define("ops:widget/sidebar/Sidebar.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t,r){var n=t.shift();if(0===t.length){e[n].children=r;for(var a=0;a<e[n].children.length;a++)"serviceUnit"==e[n].children[a].type&&(e[n].children[a].isLeaf=!0);console.log("1",e[n].children)}else{e[n].children=i(e[n].children,t,r);for(var a=0;a<e[n].children.length;a++)"serviceUnit"==e[n].children[a].type&&(e[n].children[a].isLeaf=!0);console.log("2",e[n].children)}return e}Object.defineProperty(t,"__esModule",{value:!0});var o=e("react"),c=n(o),l=e("antd"),s=e("ops:static/js/utils/jsonp.js"),d=n(s),u=l.Tree.TreeNode,f=c["default"].createClass({displayName:"Sidebar",getInitialState:function(){return{treeData:[]}},componentDidMount:function(){var e=this,t=this;setTimeout(function(){d["default"](e.props.url,function(e,r){t.setState({treeData:Object.keys(r).map(function(e){return r[e]})})})},100)},onLoadData:function(e){var t=this,r=e.props.eventKey.split("-").slice(1),n=this;return new Promise(function(o){var c=[].concat(a(t.state.treeData));d["default"]("http://noah.baidu.com/service-tree/v1/node/"+e.props.id+"/children",function(e,t){n.setState({treeData:i(c,r,Object.keys(t).map(function(e){return t[e]}))}),o()})})},render:function(){var e=function r(e,t){return e.map(function(e,n){var a=t+"-"+n;return e.children?c["default"].createElement(u,{title:e.name,key:a,id:e.id},r(e.children,a)):c["default"].createElement(u,{title:e.name,key:a,id:e.id,isLeaf:e.isLeaf,disabled:"0-0-0"===e.key})})},t=e(this.state.treeData,"0");return c["default"].createElement(l.Tree,{loadData:this.onLoadData},t)}});t["default"]=f,r.exports=t["default"]});